{"version":3,"file":"polpware-modal-directives.umd.js","sources":["ng://@polpware/modal-directives/lib/draggable/draggable.directive.ts","ng://@polpware/modal-directives/lib/draggable/draggable-module.ts"],"sourcesContent":["import { Directive, ElementRef, HostListener, AfterViewInit } from '@angular/core';\n\n/*\n * Directive to add 'drag' support to Ngx Bootstrap modals (https://github.com/valor-software/ngx-bootstrap).\n * Based on this library to enable drag support for an ng-bootstrap modal: https://github.com/mattxu-zz/ngb-modal-draggable\n * https://gist.githubusercontent.com/markleusink/7af171d5f17e7dc9714e69965fdabab9/raw/ff3bdab36433f2d78c21874e6eb09b10d18a1e00/draggable.directive.ts\n *\n * Enable by adding the directive to the modal-header element, e.g.:\n *\n * <div class=\"modal-header\" ngxModalDraggable>  </div>\n */\n\n@Directive({\n    selector: '[polpModalDraggable]'\n})\nexport class polpModalDraggableDirective implements AfterViewInit {\n    private modalElement: HTMLElement;\n    private topStart: number;\n    private leftStart: number;\n    private isDraggable: boolean;\n    private handleElement: HTMLElement;\n\n    constructor(public element: ElementRef) {\n    }\n\n    ngAfterViewInit() {\n        let element = this.element.nativeElement;\n\n        //only make the modal header draggable\n        this.handleElement = this.element.nativeElement;\n\n        //change cursor on the header\n        this.handleElement.style.cursor = 'pointer';\n\n        //get the modal parent container element: that's the element we're going to move around\n        for (let level = 3; level > 0; level--) {\n            element = element.parentNode;\n        }\n\n        this.modalElement = element;\n        this.modalElement.style.position = 'relative';\n    }\n\n    @HostListener('mousedown', ['$event'])\n    onMouseDown(event: MouseEvent) {\n        if (event.button === 2 || (this.handleElement && event.target !== this.handleElement)) {\n            return; // prevents right click drag\n        }\n\n        //enable dragging\n        this.isDraggable = true;\n\n        //store original position\n        this.topStart = event.clientY - Number(this.modalElement.style.top.replace('px', ''));\n        this.leftStart = event.clientX - Number(this.modalElement.style.left.replace('px', ''));\n        event.preventDefault();\n    }\n\n    @HostListener('document:mouseup', ['$event'])\n    onMouseUp(event: MouseEvent) {\n        this.isDraggable = false;\n    }\n\n    @HostListener('document:mousemove', ['$event'])\n    onMouseMove(event: MouseEvent) {\n        if (this.isDraggable) {\n            //on moving the mouse, reposition the modal\n            this.modalElement.style.top = (event.clientY - this.topStart) + 'px';\n            this.modalElement.style.left = (event.clientX - this.leftStart) + 'px';\n        }\n    }\n\n    @HostListener('document:mouseleave', ['$event'])\n    onMouseLeave(event: MouseEvent) {\n        this.isDraggable = false;\n    }\n\n}\n","import { NgModule } from '@angular/core';\nimport { polpModalDraggableDirective } from './draggable.directive';\n\n@NgModule({\n    declarations: [\n        polpModalDraggableDirective\n    ],\n    exports: [\n        polpModalDraggableDirective\n    ]\n})\nexport class PolpDraggableModule { }\n"],"names":["Directive","HostListener","NgModule"],"mappings":";;;;;;IAEA;;;;;;;;;;QAoBI,qCAAmB,OAAmB;YAAnB,YAAO,GAAP,OAAO,CAAY;SACrC;QAED,qDAAe,GAAf;YACI,IAAI,OAAO,GAAG,IAAI,CAAC,OAAO,CAAC,aAAa,CAAC;;YAGzC,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC,OAAO,CAAC,aAAa,CAAC;;YAGhD,IAAI,CAAC,aAAa,CAAC,KAAK,CAAC,MAAM,GAAG,SAAS,CAAC;;YAG5C,KAAK,IAAI,KAAK,GAAG,CAAC,EAAE,KAAK,GAAG,CAAC,EAAE,KAAK,EAAE,EAAE;gBACpC,OAAO,GAAG,OAAO,CAAC,UAAU,CAAC;aAChC;YAED,IAAI,CAAC,YAAY,GAAG,OAAO,CAAC;YAC5B,IAAI,CAAC,YAAY,CAAC,KAAK,CAAC,QAAQ,GAAG,UAAU,CAAC;SACjD;QAGD,iDAAW,GADX,UACY,KAAiB;YACzB,IAAI,KAAK,CAAC,MAAM,KAAK,CAAC,KAAK,IAAI,CAAC,aAAa,IAAI,KAAK,CAAC,MAAM,KAAK,IAAI,CAAC,aAAa,CAAC,EAAE;gBACnF,OAAO;aACV;;YAGD,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC;;YAGxB,IAAI,CAAC,QAAQ,GAAG,KAAK,CAAC,OAAO,GAAG,MAAM,CAAC,IAAI,CAAC,YAAY,CAAC,KAAK,CAAC,GAAG,CAAC,OAAO,CAAC,IAAI,EAAE,EAAE,CAAC,CAAC,CAAC;YACtF,IAAI,CAAC,SAAS,GAAG,KAAK,CAAC,OAAO,GAAG,MAAM,CAAC,IAAI,CAAC,YAAY,CAAC,KAAK,CAAC,IAAI,CAAC,OAAO,CAAC,IAAI,EAAE,EAAE,CAAC,CAAC,CAAC;YACxF,KAAK,CAAC,cAAc,EAAE,CAAC;SAC1B;QAGD,+CAAS,GADT,UACU,KAAiB;YACvB,IAAI,CAAC,WAAW,GAAG,KAAK,CAAC;SAC5B;QAGD,iDAAW,GADX,UACY,KAAiB;YACzB,IAAI,IAAI,CAAC,WAAW,EAAE;;gBAElB,IAAI,CAAC,YAAY,CAAC,KAAK,CAAC,GAAG,GAAG,CAAC,KAAK,CAAC,OAAO,GAAG,IAAI,CAAC,QAAQ,IAAI,IAAI,CAAC;gBACrE,IAAI,CAAC,YAAY,CAAC,KAAK,CAAC,IAAI,GAAG,CAAC,KAAK,CAAC,OAAO,GAAG,IAAI,CAAC,SAAS,IAAI,IAAI,CAAC;aAC1E;SACJ;QAGD,kDAAY,GADZ,UACa,KAAiB;YAC1B,IAAI,CAAC,WAAW,GAAG,KAAK,CAAC;SAC5B;8GA5DQ,2BAA2B;0EAA3B,2BAA2B;gIAA3B,uBAAmB,iGAAnB,qBAAiB,oIAAjB,uBAAmB,sIAAnB,wBAAoB;;0CAfjC;KAYA,IAiEC;wDA9DY,2BAA2B;kBAHvCA,cAAS;mBAAC;oBACP,QAAQ,EAAE,sBAAsB;iBACnC;;sBA6BIC,iBAAY;uBAAC,WAAW,EAAE,CAAC,QAAQ,CAAC;;sBAepCA,iBAAY;uBAAC,kBAAkB,EAAE,CAAC,QAAQ,CAAC;;sBAK3CA,iBAAY;uBAAC,oBAAoB,EAAE,CAAC,QAAQ,CAAC;;sBAS7CA,iBAAY;uBAAC,qBAAqB,EAAE,CAAC,QAAQ,CAAC;;;;QCrEnD;SAQoC;iEAAvB,mBAAmB;+HAAnB,mBAAmB;kCAXhC;KAGA,IAQoC;8FAAvB,mBAAmB,mBANxB,2BAA2B,aAG3B,2BAA2B;wDAGtB,mBAAmB;kBAR/BC,aAAQ;mBAAC;oBACN,YAAY,EAAE;wBACV,2BAA2B;qBAC9B;oBACD,OAAO,EAAE;wBACL,2BAA2B;qBAC9B;iBACJ;;;;;;;;;;;;;;"}