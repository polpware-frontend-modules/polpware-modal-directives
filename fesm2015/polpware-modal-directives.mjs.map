{"version":3,"file":"polpware-modal-directives.mjs","sources":["../../../../projects/polpware/modal-directives/src/lib/draggable/draggable.directive.ts","../../../../projects/polpware/modal-directives/src/lib/draggable/draggable-module.ts","../../../../projects/polpware/modal-directives/src/public-api.ts","../../../../projects/polpware/modal-directives/src/polpware-modal-directives.ts"],"sourcesContent":["import { Directive, ElementRef, HostListener, AfterViewInit } from '@angular/core';\n\n/*\n * Directive to add 'drag' support to Ngx Bootstrap modals (https://github.com/valor-software/ngx-bootstrap).\n * Based on this library to enable drag support for an ng-bootstrap modal: https://github.com/mattxu-zz/ngb-modal-draggable\n * https://gist.githubusercontent.com/markleusink/7af171d5f17e7dc9714e69965fdabab9/raw/ff3bdab36433f2d78c21874e6eb09b10d18a1e00/draggable.directive.ts\n *\n * Enable by adding the directive to the modal-header element, e.g.:\n *\n * <div class=\"modal-header\" ngxModalDraggable>  </div>\n */\n\n@Directive({\n    selector: '[polpModalDraggable]'\n})\nexport class polpModalDraggableDirective implements AfterViewInit {\n    private modalElement: HTMLElement;\n    private topStart: number;\n    private leftStart: number;\n    private isDraggable: boolean;\n    private handleElement: HTMLElement;\n\n    constructor(public element: ElementRef) {\n    }\n\n    ngAfterViewInit() {\n        let element = this.element.nativeElement;\n\n        //only make the modal header draggable\n        this.handleElement = this.element.nativeElement;\n\n        //change cursor on the header\n        this.handleElement.style.cursor = 'pointer';\n\n        //get the modal parent container element: that's the element we're going to move around\n        for (let level = 3; level > 0; level--) {\n            element = element.parentNode;\n        }\n\n        this.modalElement = element;\n        this.modalElement.style.position = 'relative';\n    }\n\n    @HostListener('mousedown', ['$event'])\n    onMouseDown(event: MouseEvent) {\n        if (event.button === 2 || (this.handleElement && event.target !== this.handleElement)) {\n            return; // prevents right click drag\n        }\n\n        //enable dragging\n        this.isDraggable = true;\n\n        //store original position\n        this.topStart = event.clientY - Number(this.modalElement.style.top.replace('px', ''));\n        this.leftStart = event.clientX - Number(this.modalElement.style.left.replace('px', ''));\n        event.preventDefault();\n    }\n\n    @HostListener('document:mouseup', ['$event'])\n    onMouseUp(event: MouseEvent) {\n        this.isDraggable = false;\n    }\n\n    @HostListener('document:mousemove', ['$event'])\n    onMouseMove(event: MouseEvent) {\n        if (this.isDraggable) {\n            //on moving the mouse, reposition the modal\n            this.modalElement.style.top = (event.clientY - this.topStart) + 'px';\n            this.modalElement.style.left = (event.clientX - this.leftStart) + 'px';\n        }\n    }\n\n    @HostListener('document:mouseleave', ['$event'])\n    onMouseLeave(event: MouseEvent) {\n        this.isDraggable = false;\n    }\n\n}\n","import { NgModule } from '@angular/core';\nimport { polpModalDraggableDirective } from './draggable.directive';\n\n@NgModule({\n    declarations: [\n        polpModalDraggableDirective\n    ],\n    exports: [\n        polpModalDraggableDirective\n    ]\n})\nexport class PolpDraggableModule { }\n","/*\n * Public API Surface of modal-directives\n */\n\nexport * from './lib/draggable/draggable.directive';\nexport * from './lib/draggable/draggable-module';\n\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public-api';\n"],"names":[],"mappings":"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"}