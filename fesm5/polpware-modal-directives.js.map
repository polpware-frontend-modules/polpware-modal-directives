{"version":3,"file":"polpware-modal-directives.js","sources":["ng://@polpware/modal-directives/lib/draggable/draggable.directive.ts","ng://@polpware/modal-directives/lib/draggable/draggable-module.ts","ng://@polpware/modal-directives/public-api.ts","ng://@polpware/modal-directives/polpware-modal-directives.ts"],"sourcesContent":["import { Directive, ElementRef, HostListener, AfterViewInit } from '@angular/core';\n\n/*\n * Directive to add 'drag' support to Ngx Bootstrap modals (https://github.com/valor-software/ngx-bootstrap).\n * Based on this library to enable drag support for an ng-bootstrap modal: https://github.com/mattxu-zz/ngb-modal-draggable\n * https://gist.githubusercontent.com/markleusink/7af171d5f17e7dc9714e69965fdabab9/raw/ff3bdab36433f2d78c21874e6eb09b10d18a1e00/draggable.directive.ts\n *\n * Enable by adding the directive to the modal-header element, e.g.:\n *\n * <div class=\"modal-header\" ngxModalDraggable>  </div>\n */\n\n@Directive({\n    selector: '[polpModalDraggable]'\n})\nexport class polpModalDraggableDirective implements AfterViewInit {\n    private modalElement: HTMLElement;\n    private topStart: number;\n    private leftStart: number;\n    private isDraggable: boolean;\n    private handleElement: HTMLElement;\n\n    constructor(public element: ElementRef) {\n    }\n\n    ngAfterViewInit() {\n        let element = this.element.nativeElement;\n\n        //only make the modal header draggable\n        this.handleElement = this.element.nativeElement;\n\n        //change cursor on the header\n        this.handleElement.style.cursor = 'pointer';\n\n        //get the modal parent container element: that's the element we're going to move around\n        for (let level = 3; level > 0; level--) {\n            element = element.parentNode;\n        }\n\n        this.modalElement = element;\n        this.modalElement.style.position = 'relative';\n    }\n\n    @HostListener('mousedown', ['$event'])\n    onMouseDown(event: MouseEvent) {\n        if (event.button === 2 || (this.handleElement && event.target !== this.handleElement)) {\n            return; // prevents right click drag\n        }\n\n        //enable dragging\n        this.isDraggable = true;\n\n        //store original position\n        this.topStart = event.clientY - Number(this.modalElement.style.top.replace('px', ''));\n        this.leftStart = event.clientX - Number(this.modalElement.style.left.replace('px', ''));\n        event.preventDefault();\n    }\n\n    @HostListener('document:mouseup', ['$event'])\n    onMouseUp(event: MouseEvent) {\n        this.isDraggable = false;\n    }\n\n    @HostListener('document:mousemove', ['$event'])\n    onMouseMove(event: MouseEvent) {\n        if (this.isDraggable) {\n            //on moving the mouse, reposition the modal\n            this.modalElement.style.top = (event.clientY - this.topStart) + 'px';\n            this.modalElement.style.left = (event.clientX - this.leftStart) + 'px';\n        }\n    }\n\n    @HostListener('document:mouseleave', ['$event'])\n    onMouseLeave(event: MouseEvent) {\n        this.isDraggable = false;\n    }\n\n}\n","import { NgModule } from '@angular/core';\nimport { polpModalDraggableDirective } from './draggable.directive';\n\n@NgModule({\n    declarations: [\n        polpModalDraggableDirective\n    ],\n    exports: [\n        polpModalDraggableDirective\n    ]\n})\nexport class PolpDraggableModule { }\n","/*\n * Public API Surface of modal-directives\n */\n\nexport * from './lib/draggable/draggable.directive';\nexport * from './lib/draggable/draggable-module';\n\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public-api';\n"],"names":[],"mappings":";;AAEA;;;;;;;;;;IAoBI,qCAAmB,OAAmB;QAAnB,YAAO,GAAP,OAAO,CAAY;KACrC;IAED,qDAAe,GAAf;QACI,IAAI,OAAO,GAAG,IAAI,CAAC,OAAO,CAAC,aAAa,CAAC;;QAGzC,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC,OAAO,CAAC,aAAa,CAAC;;QAGhD,IAAI,CAAC,aAAa,CAAC,KAAK,CAAC,MAAM,GAAG,SAAS,CAAC;;QAG5C,KAAK,IAAI,KAAK,GAAG,CAAC,EAAE,KAAK,GAAG,CAAC,EAAE,KAAK,EAAE,EAAE;YACpC,OAAO,GAAG,OAAO,CAAC,UAAU,CAAC;SAChC;QAED,IAAI,CAAC,YAAY,GAAG,OAAO,CAAC;QAC5B,IAAI,CAAC,YAAY,CAAC,KAAK,CAAC,QAAQ,GAAG,UAAU,CAAC;KACjD;IAGD,iDAAW,GADX,UACY,KAAiB;QACzB,IAAI,KAAK,CAAC,MAAM,KAAK,CAAC,KAAK,IAAI,CAAC,aAAa,IAAI,KAAK,CAAC,MAAM,KAAK,IAAI,CAAC,aAAa,CAAC,EAAE;YACnF,OAAO;SACV;;QAGD,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC;;QAGxB,IAAI,CAAC,QAAQ,GAAG,KAAK,CAAC,OAAO,GAAG,MAAM,CAAC,IAAI,CAAC,YAAY,CAAC,KAAK,CAAC,GAAG,CAAC,OAAO,CAAC,IAAI,EAAE,EAAE,CAAC,CAAC,CAAC;QACtF,IAAI,CAAC,SAAS,GAAG,KAAK,CAAC,OAAO,GAAG,MAAM,CAAC,IAAI,CAAC,YAAY,CAAC,KAAK,CAAC,IAAI,CAAC,OAAO,CAAC,IAAI,EAAE,EAAE,CAAC,CAAC,CAAC;QACxF,KAAK,CAAC,cAAc,EAAE,CAAC;KAC1B;IAGD,+CAAS,GADT,UACU,KAAiB;QACvB,IAAI,CAAC,WAAW,GAAG,KAAK,CAAC;KAC5B;IAGD,iDAAW,GADX,UACY,KAAiB;QACzB,IAAI,IAAI,CAAC,WAAW,EAAE;;YAElB,IAAI,CAAC,YAAY,CAAC,KAAK,CAAC,GAAG,GAAG,CAAC,KAAK,CAAC,OAAO,GAAG,IAAI,CAAC,QAAQ,IAAI,IAAI,CAAC;YACrE,IAAI,CAAC,YAAY,CAAC,KAAK,CAAC,IAAI,GAAG,CAAC,KAAK,CAAC,OAAO,GAAG,IAAI,CAAC,SAAS,IAAI,IAAI,CAAC;SAC1E;KACJ;IAGD,kDAAY,GADZ,UACa,KAAiB;QAC1B,IAAI,CAAC,WAAW,GAAG,KAAK,CAAC;KAC5B;0GA5DQ,2BAA2B;iEAA3B,2BAA2B;uHAA3B,uBAAmB,iGAAnB,qBAAiB,+HAAjB,uBAAmB,iIAAnB,wBAAoB;;sCAfjC;CAYA,IAiEC;+CA9DY,2BAA2B;cAHvC,SAAS;eAAC;gBACP,QAAQ,EAAE,sBAAsB;aACnC;;kBA6BI,YAAY;mBAAC,WAAW,EAAE,CAAC,QAAQ,CAAC;;kBAepC,YAAY;mBAAC,kBAAkB,EAAE,CAAC,QAAQ,CAAC;;kBAK3C,YAAY;mBAAC,oBAAoB,EAAE,CAAC,QAAQ,CAAC;;kBAS7C,YAAY;mBAAC,qBAAqB,EAAE,CAAC,QAAQ,CAAC;;;;ICrEnD;KAQoC;wDAAvB,mBAAmB;sHAAnB,mBAAmB;8BAXhC;CAGA,IAQoC;qFAAvB,mBAAmB,mBANxB,2BAA2B,aAG3B,2BAA2B;+CAGtB,mBAAmB;cAR/B,QAAQ;eAAC;gBACN,YAAY,EAAE;oBACV,2BAA2B;iBAC9B;gBACD,OAAO,EAAE;oBACL,2BAA2B;iBAC9B;aACJ;;;ACVD;;;;ACAA;;;;;;"}